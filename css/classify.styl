@keyframes classify-loading
  0%
    background-color: rgba($blue, 0.25)

  100%
    background-color: rgba($blue, 0)

.page > .classify
  $min-top = 40px

  .controls
    background: #eee
    box-shadow: 0 2px 4px -1px rgba(#000, 0.5)
    color: #000
    left: 20px
    position: absolute
    text-align: center
    text-shadow: 0 1px #fff
    top: $min-top + 20px
    width: 640px

    .subject
      background-image: linear-gradient(bottom, rgba(#000, 0.25), rgba(#000, 0), transparent)
      overflow: hidden
      padding: 2px
      position: relative

      img
        border: 2px solid transparent
        box-sizing: border-box
        display: block
        height: 318px
        margin: 0 auto
        width: 318px

        &.older
          display: none

    .matches.step
      overflow: hidden

      ul
        clearfix()
        margin: 0
        padding: 0

        li
          display: block
          float: left
          width: 20%

          button
            font-size: 12px
            font-weight: bold
            line-height: 1
            width: 100%

      .categories
        ul
          border-top: 1px solid #ccc

          button
            border: 1px solid #ccc
            border-bottom: 0
            border-left-color: #fff
            border-top: 0
            box-shadow: 0 1px 0 #fff inset
            height: 45px
            padding: 0 25px
            position: relative

            &.active
              background: #ccc
              border-left-color: #bbb
              box-shadow: 0 1px 10px #999 inset

              &:after
                border: 15px solid transparent
                border-bottom: 0
                border-top-color: #ccc
                content: ""
                height: 0
                left: 50%
                margin: -7px 0 0 -15px
                position: absolute
                top: 100%
                width: 0

      [data-category]
        background: #ccc
        box-shadow: 0 3px 10px rgba(#000, 0.33) inset
        display: none
        padding: 5px

        &.active
          display: block

        button
          padding: 5px
          position: relative

          &.active
            background: #fff
            box-shadow: 0 1px 3px rgba(#000, 0.25)

          img
            box-shadow: 0 1px 3px rgba(#000, 0.25)
            display: block

          .caption
            background: rgba(#fff, 0.75)
            bottom: 10px
            left: 10px
            position: absolute
            right: 10px
            text-align: center

    .step-controls
      border-bottom: 1px solid #ccc
      border-top: 1px solid #fff

    .progress
      border-bottom: 1px solid #ccc
      border-top: 1px solid #fff
      padding: 10px

      // TODO: These need work.
      button
        background: $blue
        box-shadow: 0 1px 1px rgba(#000, 0.5)
        border-radius: 3em
        color: #fff
        font-weight: bold
        letter-spacing: 1px
        margin: 3px
        padding: 3px 20px
        text-shadow: 0 1px 1px #000
        text-transform: uppercase

      .followup
        display: none

  &.loading .controls .subject
    animation: 1s classify-loading ease-in-out infinite alternate

  // The "stronger" step gets side-by-side subject images.
  &[data-step="stronger"] .controls .subject img
    cursor: pointer
    float: left
    margin: 0

    &.older
      display: block

    &.active
      border-color: #000

  &[data-step="reveal"] .controls .progress
    .in-progress
      display: none

    .followup
      display: block

  .step-details
    bottom: 0
    left: 660px
    padding: 30px
    position: absolute
    right: 0
    top: $min-top
